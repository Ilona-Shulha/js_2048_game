{"version":3,"sources":["scripts/main.js"],"names":["allRows","document","querySelectorAll","startButton","querySelector","gameScore","messageStart","messageLose","messageWin","count","moveDetector","start","indUnate","arrAllCells","children","field","moveFieldToDOM","i","ind","numberCell","innerText","classList","getNewSquare","element","nuwRandomNum","Math","floor","random","getNewRandomContent","some","cell","randomNum","actionAfterMove","youWin","youLose","moveCellLeft","parentEl","functionTorward","includes","sumNum","push","moveCellRight","moveCellUp","indRow","moveCellDown","allCellsBoards","every","item","endGame","forEach","thisCell","remove","add","addEventListener","contains","row","length","e","code","index"],"mappings":"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","file":"main.a5c39ae0.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\n\nconst allRows = document.querySelectorAll('tr');\nconst startButton = document.querySelector('button');\nconst gameScore = document.querySelector('.game-score');\nconst messageStart = document.querySelector('.message-start');\nconst messageLose = document.querySelector('.message-lose');\nconst messageWin = document.querySelector('.message-win');\nlet count = 0;\nlet moveDetector = false;\nlet start = false;\nlet indUnate = [];\nconst arrAllCells = [[...[...allRows][0].children],\n  [...[...allRows][1].children],\n  [...[...allRows][2].children],\n  [...[...allRows][3].children],\n];\nconst field = [\n  [0, 0, 0, 0],\n  [0, 0, 0, 0],\n  [0, 0, 0, 0],\n  [0, 0, 0, 0],\n];\n\n// function content from board to dom\n\nfunction moveFieldToDOM() {\n  for (let i = 0; i < 4; i++) {\n    for (let ind = 0; ind < 4; ind++) {\n      const numberCell = field[i][ind];\n\n      if (numberCell === 0) {\n        arrAllCells[i][ind].innerText = '';\n        arrAllCells[i][ind].classList = 'field-cell';\n      } else {\n        arrAllCells[i][ind].innerText = numberCell;\n        arrAllCells[i][ind].classList = `field-cell field-cell--${numberCell}`;\n      };\n    };\n  };\n};\n\n// function for creating new random square\n\nfunction getNewSquare(element) {\n  const nuwRandomNum = Math.floor(Math.random() * 4);\n\n  if (typeof (element[nuwRandomNum]) === 'number') {\n    if (element[nuwRandomNum] === 0) {\n      element[nuwRandomNum] = getNewRandomContent();\n    } else {\n      getNewSquare(element);\n    }\n  } else {\n    if (element[nuwRandomNum].some(cell => cell === 0)) {\n      getNewSquare(element[nuwRandomNum]);\n    } else {\n      getNewSquare(element);\n    }\n  }\n  moveFieldToDOM();\n};\n\n// function for creating new random content\n\nfunction getNewRandomContent() {\n  const randomNum = Math.random();\n\n  if (randomNum < 0.1) {\n    return 4;\n  } else {\n    return 2;\n  };\n}\n\n// Click button Restart\n\nstartButton.addEventListener('click', () => {\n  if (startButton.classList.contains('restart')) {\n    field.forEach(row => {\n      for (let i = 0; i < row.length; i++) {\n        row[i] = 0;\n      }\n    });\n    gameScore.innerText = 0;\n    getNewSquare(field);\n    getNewSquare(field);\n\n    if (!messageLose.classList.contains('hidden')) {\n      messageLose.classList.add('hidden');\n    }\n    messageStart.classList.remove('hidden');\n  } else {\n    start = true;\n\n    field.forEach(row => {\n      for (let i = 0; i < row.length; i++) {\n        row[i] = 0;\n      }\n    });\n    startButton.classList.add('restart');\n    startButton.classList.remove('start');\n    startButton.innerText = 'Restart';\n    getNewSquare(field);\n    getNewSquare(field);\n  }\n});\n\n// function action after move\n\nfunction actionAfterMove() {\n  youWin();\n\n  if (!youWin()) {\n    if (count !== 12) {\n      getNewSquare(field);\n    };\n    moveDetector = false;\n    count = 0;\n    youLose();\n  };\n};\n\nfunction moveCellLeft(parentEl, ind, functionTorward) {\n  if (parentEl[ind] === 0) {\n    return (count += 1);\n  } else {\n    if ((ind - 1) < 0) {\n      return;\n    } else if (parentEl[ind - 1] === 0) {\n      moveDetector = true;\n      parentEl[ind - 1] = parentEl[ind];\n      parentEl[ind] = 0;\n      functionTorward(parentEl, ind - 1, functionTorward);\n    } else if (parentEl[ind - 1] === parentEl[ind]\n               & !indUnate.includes((ind - 1))) {\n      const sumNum = parentEl[ind] * 2;\n\n      parentEl[ind - 1] = sumNum;\n      parentEl[ind] = 0;\n      indUnate.push((ind - 1));\n      gameScore.innerText = +gameScore.innerText + sumNum;\n    } else if (parentEl[ind - 1] !== parentEl[ind]) {\n      if (!moveDetector) {\n        count += 1;\n      }\n    };\n  };\n}\n\nfunction moveCellRight(parentEl, ind, functionTorward) {\n  if (parentEl[ind] === 0) {\n    return (count += 1);\n  } else {\n    if ((ind + 1) > 3) {\n      return;\n    } else if (parentEl[ind + 1] === 0) {\n      moveDetector = true;\n      parentEl[ind + 1] = parentEl[ind];\n      parentEl[ind] = 0;\n      functionTorward(parentEl, ind + 1, functionTorward);\n    } else if (parentEl[ind + 1] === parentEl[ind]\n               & !indUnate.includes((ind + 1))) {\n      const sumNum = parentEl[ind] * 2;\n\n      parentEl[ind + 1] = sumNum;\n      parentEl[ind] = 0;\n      indUnate.push((ind + 1));\n      gameScore.innerText = +gameScore.innerText + sumNum;\n    } else if (parentEl[ind + 1] !== parentEl[ind]) {\n      if (!moveDetector) {\n        count += 1;\n      }\n    };\n  };\n}\n\nfunction moveCellUp(indRow, ind, functionTorward) {\n  if (field[indRow][ind] === 0) {\n    return (count += 1);\n  } else {\n    if ((indRow - 1) < 0) {\n      return;\n    } else if (field[indRow - 1][ind] === 0) {\n      moveDetector = true;\n      field[indRow - 1][ind] = field[indRow][ind];\n      field[indRow][ind] = 0;\n      functionTorward((indRow - 1), ind, functionTorward);\n    } else if (field[indRow - 1][ind] === field[indRow][ind]\n               & !indUnate.includes(`${indRow - 1}:${ind}`)) {\n      const sumNum = field[indRow][ind] * 2;\n\n      field[indRow - 1][ind] = sumNum;\n      field[indRow][ind] = 0;\n      indUnate.push(`${indRow - 1}:${ind}`);\n      gameScore.innerText = +gameScore.innerText + sumNum;\n    } else if (field[indRow - 1][ind] !== field[indRow][ind]) {\n      if (!moveDetector) {\n        count += 1;\n      }\n    };\n  };\n}\n\nfunction moveCellDown(indRow, ind, functionTorward) {\n  if (field[indRow][ind] === 0) {\n    return (count += 1);\n  } else {\n    if ((indRow + 1) > 3) {\n      return;\n    } else if (field[indRow + 1][ind] === 0) {\n      moveDetector = true;\n      field[indRow + 1][ind] = field[indRow][ind];\n      field[indRow][ind] = 0;\n      functionTorward((indRow + 1), ind, functionTorward);\n    } else if (field[indRow + 1][ind] === field[indRow][ind]\n               & !indUnate.includes((`${indRow + 1}:${ind}`))) {\n      const sumNum = field[indRow][ind] * 2;\n\n      field[indRow + 1][ind] = sumNum;\n      field[indRow][ind] = 0;\n      indUnate.push((`${indRow + 1}:${ind}`));\n      gameScore.innerText = +gameScore.innerText + sumNum;\n    } else if (field[indRow + 1][ind] !== field[indRow][ind]) {\n      if (!moveDetector) {\n        count += 1;\n      }\n    };\n  };\n}\n\n// EventListener on arrows keys\n\ndocument.addEventListener('keydown', (e) => {\n  if (start) {\n    switch (e.code) {\n      case 'ArrowLeft':\n        field.forEach(row => {\n          for (let i = 1; i < 4; i++) {\n            moveCellLeft(row, i, moveCellLeft);\n          };\n          indUnate = [];\n        });\n        actionAfterMove();\n        break;\n\n      case 'ArrowRight':\n        field.forEach(row => {\n          for (let i = 2; i >= 0; i--) {\n            moveCellRight(row, i, moveCellRight);\n          };\n          indUnate = [];\n        });\n        actionAfterMove();\n        break;\n\n      case 'ArrowUp':\n        for (let i = 1; i < 4; i++) {\n          for (let index = 0; index < 4; index++) {\n            moveCellUp(i, index, moveCellUp);\n          };\n        };\n        indUnate = [];\n        actionAfterMove();\n        break;\n\n      case 'ArrowDown':\n        for (let i = 2; i >= 0; i--) {\n          for (let index = 0; index < 4; index++) {\n            moveCellDown(i, index, moveCellDown);\n          };\n        };\n        indUnate = [];\n        actionAfterMove();\n        break;\n    }\n  }\n});\n\n// function for message lose\nfunction youLose() {\n  const allCellsBoards = [...field[0], ...field[1], ...field[2], ...field[3]];\n\n  if (allCellsBoards.every(item => item !== 0)) {\n    let endGame = true;\n\n    field.forEach(item => {\n      for (let i = 0; i < 3; i++) {\n        if (item[i] === item[i + 1]) {\n          endGame = false;\n\n          return;\n        };\n      };\n    });\n\n    for (let i = 0; i < 3; i++) {\n      for (let ind = 0; ind < 4; ind++) {\n        const thisCell = field[i][ind];\n\n        if (thisCell === field[i + 1][ind]) {\n          endGame = false;\n\n          return;\n        };\n      };\n    };\n\n    if (endGame) {\n      messageLose.classList.remove('hidden');\n      messageStart.classList.add('hidden');\n    };\n  };\n};\n\n// function you win!\n\nfunction youWin() {\n  const allCellsBoards = [...field[0], ...field[1], ...field[2], ...field[3]];\n\n  if (allCellsBoards.some(item => item === 2048)) {\n    messageWin.classList.remove('hidden');\n    messageStart.classList.add('hidden');\n    start = false;\n    startButton.classList.add('start');\n    startButton.classList.remove('restart');\n    startButton.innerText = 'Start';\n\n    return true;\n  };\n};\n"]}